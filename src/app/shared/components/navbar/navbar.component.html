<header [class]="{
  'justify-center': isAuth(),
  'justify-between': !isAuth()
}"
  class="bg-white relative z-40 text-dark shadow-sm py-2 px-4 md-p-4 flex flex-wrap xs:flex-nowrap items-center gap-2 md:gap-6">
  <a class="cursor-pointer shrink-0" routerLink="/">
    <img src="/images/logo.png" class="w-14" alt="IZAR logo">
    <!-- <h1 class="text-xl font-bold">Logo</h1> -->
  </a>

  @if (!isAuth()) {
  <div class="grow w-full md:w-auto order-3 xs:order-2 flex items-center gap-4">
    <div class="relative">
      <button class="w-fit btn-icon flex gap-1 items-center flex-nowrap"
        [class.btn-icon-active]="isOpenedCategoriesPopup()" (click)="onToggleCategoriesPopup()">
        <!-- <i class="fa-solid fa-bars"></i> -->
        <app-icons icon="menu" />
        <span class="hidden sm:inline-block">Categories</span>
      </button>
      <app-popup [isOpened]="isOpenedCategoriesPopup()">
        @for (category of categories(); track $index) {
        <li class="text-dark whitespace-nowrap"><a
            class="cursor-pointer hover:bg-gray-200 transition-colors w-full inline-block p-3">{{category.name}}</a>
        </li>
        } @empty {
        <li class="text-dark whitespace-nowrap py-20 text-lg px-4">
          <p>Wait for the response</p>
        </li>
        }
      </app-popup>
    </div>

    <div class="relative grow bg-white rounded-lg text-lg text-dark">
      <input type="text" class="input grow rounded-xl placeholder:w-[85%] placeholder:truncate"
        placeholder="Search by game, movie, anime, etc...">
      <button
        class="absolute top-1/2 -translate-y-1/2 end-3 btn w-9 h-9 p-0 bg-brand shadow-none hover:bg-brand-hover shrink-0 rounded-4xl"><app-icons
          icon="search" color="#fff" /></button>
    </div>
  </div>

  <nav class="order-2 xs:order-3 grow xs:grow-0">
    <ul class="flex items-center justify-end gap-8 xs:gap-2 lg:gap-8">
      <li class="relative">
        @if (!user()) {
        <a class="btn-icon" routerLink="/login">
          <!-- <i class="fa-regular fa-circle-user"></i> -->
          <app-icons icon="profile" />
          <span class="btn-icon-label">Login</span>
        </a>
        } @else {
        <button class="btn-icon" (click)="onToggleUserPopup()">
          <div class="flex items-center gap-2">
            <i class="fa-solid fa-sort-down -translate-y-1.5"></i>
            <img [src]="userAvatar()" class="size-7 rounded-full" [alt]="userName()">
          </div>
          <span class="btn-icon-label">Your Account</span>
        </button>
        <app-popup [isOpened]="isOpenedUserPopup()">
          <div role="link" header [title]="userName()"
            class="grid hover:bg-gray-200 cursor-pointer transition-colors border-b border-line grid-cols-12 text-dark p-3 gap-3">
            <div class="col-span-3">
              <img [src]="userAvatar()" class="size-10 rounded-full" [alt]="userName()">
            </div>

            <div class="col-span-9">
              <h3 class="text-lg font-semibold line-clamp-1">{{userName()}}</h3>
              <p class="text-sm text-gray">View your profile</p>
            </div>
          </div>
          @for (link of userLinks(); track $index) {
      <li class="text-dark whitespace-nowrap even:border-b even:border-gray-light"><a
          class="cursor-pointer hover:bg-gray-200 transition-colors w-full flex gap-3 p-3"><span
            [innerHTML]="link.icon"></span>
          <span>{{link.title}}</span></a>
      </li>
      }
      </app-popup>
      }
      </li>
      <li>
        <a class="btn-icon">
          <!-- <i class="fa-solid fa-heart"></i> -->
          <app-icons icon="favorite" />
          <span class="btn-icon-label">Favorite</span>
        </a>
      </li>
      <li>
        <a class="btn-icon">
          <!-- <i class="fa-solid fa-cart-shopping"></i> -->
          <app-icons icon="cart" />
          <span class="btn-icon-label">Cart</span>
        </a>
      </li>
    </ul>
  </nav>
  }
</header>

<app-overlay [isOpened]="isOpenedPopup()" (closePopup)="onClosePopup()" />